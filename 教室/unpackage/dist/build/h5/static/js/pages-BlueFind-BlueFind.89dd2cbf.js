(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-BlueFind-BlueFind"],{"0c1f":function(e,t,n){"use strict";var i=n("fdb8"),a=n.n(i);a.a},"2bc5":function(e,t,n){"use strict";var i=n("f7f7"),a=n.n(i);a.a},"2dd4":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.uni-card[data-v-44c0d81e]{margin:10px;padding:0 8px;border-radius:4px;overflow:hidden;font-family:Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;background-color:#fff;flex:1}.uni-card .uni-card__cover[data-v-44c0d81e]{position:relative;margin-top:10px;flex-direction:row;overflow:hidden;border-radius:4px}.uni-card .uni-card__cover .uni-card__cover-image[data-v-44c0d81e]{flex:1;vertical-align:middle}.uni-card .uni-card__header[data-v-44c0d81e]{display:flex;border-bottom:1px #ebeef5 solid;flex-direction:row;align-items:center;padding:10px;overflow:hidden}.uni-card .uni-card__header .uni-card__header-box[data-v-44c0d81e]{display:flex;flex:1;flex-direction:row;align-items:center;overflow:hidden}.uni-card .uni-card__header .uni-card__header-avatar[data-v-44c0d81e]{width:40px;height:40px;overflow:hidden;border-radius:5px;margin-right:10px}.uni-card .uni-card__header .uni-card__header-avatar .uni-card__header-avatar-image[data-v-44c0d81e]{flex:1;width:40px;height:40px}.uni-card .uni-card__header .uni-card__header-content[data-v-44c0d81e]{display:flex;flex-direction:column;justify-content:center;flex:1;overflow:hidden}.uni-card .uni-card__header .uni-card__header-content .uni-card__header-content-title[data-v-44c0d81e]{font-size:15px;color:#3a3a3a}.uni-card .uni-card__header .uni-card__header-content .uni-card__header-content-subtitle[data-v-44c0d81e]{font-size:12px;margin-top:5px;color:#909399}.uni-card .uni-card__header .uni-card__header-extra[data-v-44c0d81e]{line-height:12px}.uni-card .uni-card__header .uni-card__header-extra .uni-card__header-extra-text[data-v-44c0d81e]{font-size:12px;color:#909399}.uni-card .uni-card__content[data-v-44c0d81e]{padding:10px;font-size:14px;color:#6a6a6a;line-height:22px}.uni-card .uni-card__actions[data-v-44c0d81e]{font-size:12px}.uni-card--border[data-v-44c0d81e]{border:1px solid #ebeef5}.uni-card--shadow[data-v-44c0d81e]{position:relative;box-shadow:0 0 6px 1px hsla(0,0%,64.7%,.2)}.uni-card--full[data-v-44c0d81e]{margin:0;border-left-width:0;border-left-width:0;border-radius:0}.uni-card--full[data-v-44c0d81e]:after{border-radius:0}.uni-ellipsis[data-v-44c0d81e]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}',""]),e.exports=t},"50e0":function(e,t,n){"use strict";function i(e){alert("".concat(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},"5cf7":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.content[data-v-6d4a4638]{padding:%?40?%}.content uni-button[data-v-6d4a4638]{margin:%?20?% auto}',""]),e.exports=t},"66fa":function(e,t,n){"use strict";n.r(t);var i=n("c350"),a=n("a8b5");for(var c in a)"default"!==c&&function(e){n.d(t,e,(function(){return a[e]}))}(c);n("0c1f");var r,o=n("f0c5"),s=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"44c0d81e",null,!1,i["a"],r);t["default"]=s.exports},"707e":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"UniCard",emits:["click"],props:{title:{type:String,default:""},subTitle:{type:String,default:""},padding:{type:String,default:"10px"},margin:{type:String,default:"15px"},spacing:{type:String,default:"0 10px"},extra:{type:String,default:""},cover:{type:String,default:""},thumbnail:{type:String,default:""},isFull:{type:Boolean,default:!1},isShadow:{type:Boolean,default:!0},shadow:{type:String,default:"0px 0px 3px 1px rgba(0, 0, 0, 0.08)"},border:{type:Boolean,default:!0}},methods:{onClick:function(e){this.$emit("click",e)}}};t.default=i},"771a":function(e,t,n){"use strict";var i=n("4ea4");n("99af"),n("4160"),n("c975"),n("d81d"),n("fb6a"),n("c19f"),n("ace4"),n("d3b7"),n("e25e"),n("25f0"),n("498a"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("2954"),n("649e"),n("219c"),n("b39a"),n("72f7"),n("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("50e0")),c={data:function(){return{title:"Hello",connectDev:null,bleDevs:[],status:-2,deviceId:"",serviceId:"",characteristicId:"",list:{temp:"",humi:"",air:"",fan:""}}},mounted:function(){this.onBLEConnectionStateChange()},methods:{sendBlueMsg:function(e){for(var t=new ArrayBuffer(e.length),n=new DataView(t),i=0;i<e.length;i++)n.setUint8(i,e.charAt(i).charCodeAt());uni.writeBLECharacteristicValue({deviceId:this.deviceId,serviceId:this.serviceId,characteristicId:this.characteristicId,value:t,success:function(e){console.log("发送成功:",e)},fail:function(e){console.error(e)}})},initBle:function(){var e=this;this.connectDev=null,console.log("初始化蓝牙>>>"),this.bleDevs=[],this.list={temp:"",humi:"",air:"",fan:"",eq:"",vlot1:"",ampere:""},uni.openBluetoothAdapter({success:function(t){uni.getBluetoothAdapterState({success:function(t){console.log(t,"“本机设备的蓝牙已打开”"),e.startBluetoothDeviceDiscovery()},fail:function(e){uni.showToast({icon:"none",title:"查看手机蓝牙是否打开"})}})},fail:function(e){uni.showToast({icon:"none",title:"查看手机蓝牙是否打开"})}})},startBluetoothDeviceDiscovery:function(){var e=this;uni.startBluetoothDevicesDiscovery({success:function(t){console.log("启动成功",t),e.onBluetoothDeviceFound()},fail:function(e){console.log(e,"错误信息")}})},onBluetoothDeviceFound:function(){var e=this;uni.onBluetoothDeviceFound((function(t){-1==e.bleDevs.indexOf(t.devices[0].deviceId)&&e.bleDevs.push(t.devices[0])}))},createBLEConnection:function(e){this.connectDev=e;var t=this;this.deviceId=e.deviceId,uni.createBLEConnection({deviceId:this.deviceId,success:function(e){t.stopBluetoothDevicesDiscovery(),console.log("蓝牙连接成功deviceId",e),t.getBLEDeviceServices()},fail:function(e){console.log("蓝牙连接失败",e)}})},onBLEConnectionStateChange:function(){var e=this;uni.onBLEConnectionStateChange((function(t){console.log("设备 ".concat(t.deviceId," 状态改变: ").concat(t.connected," ")),0==t.connected&&e.createBLEConnection()}))},getBLEDeviceServices:function(){var e=this;setTimeout((function(){uni.getBLEDeviceServices({deviceId:e.deviceId,success:function(t){t.services.forEach((function(t){-1!=t.uuid.indexOf("0000FFE0-0000-1000-8000-00805F9B34FB")&&(e.serviceId=t.uuid,uni.onBLECharacteristicValueChange((function(t){console.log(t);var n=e.ab2hex(t.value),i=e.hexCharCodeToStr(n);console.log("16进制转字符串",i);var a=i.indexOf(","),c=i.slice(0,a),r=i.slice(a+1);r=JSON.parse(r),"testtopic/temp"===c&&(e.list.temp=r.temp1),"testtopic/humi"===c&&(e.list.humi=r.humi1),"testtopic/fan"===c&&(e.list.fan=10*r.fan_spd),"testtopic/battery"===c&&(e.list.eq=r.eq,e.list.vlot1=r.vlot1,e.ampere=r.ampere)})),e.getBLEDeviceCharacteristics())}))}})}),3e3)},getBLEDeviceCharacteristics:function(){var e=this;setTimeout((function(){uni.getBLEDeviceCharacteristics({deviceId:e.deviceId,serviceId:e.serviceId,success:function(t){console.log("res.characteristics.",t.characteristics),t.characteristics.forEach((function(t){-1!=t.uuid.indexOf("0000FFE1-0000-1000-8000-00805F9B34FB")&&(console.log("characteristicId :",t.uuid),e.characteristicId=t.uuid,e.notifyBLECharacteristicValueChange(t.uuid))}))},fail:function(e){console.log(e)}})}),1e3)},ab2hex:function(e){var t=Array.prototype.map.call(new Uint8Array(e),(function(e){return("00"+e.toString(16)).slice(-2)}));return t.join("")},stopBluetoothDevicesDiscovery:function(){var e=this;uni.stopBluetoothDevicesDiscovery({success:function(t){e.loading=!1,console.log("停止搜索蓝牙设备:"+t.errMsg)},fail:function(e){console.log("停止搜索蓝牙设备失败，错误码："+e.errCode)}})},hexCharCodeToStr:function(e){var t,n=e.trim(),i="0x"===n.substr(0,2).toLowerCase()?n.substr(2):n,c=i.length;if(c%2!==0)return(0,a.default)("存在非法字符!"),"";for(var r=[],o=0;o<c;o+=2)t=parseInt(i.substr(o,2),16),r.push(String.fromCharCode(t));return r.join("")},notifyBLECharacteristicValueChange:function(e){console.log("特征值",e),console.log("this.deviceId",this.deviceId),console.log("this.serviceId",this.serviceId),uni.notifyBLECharacteristicValueChange({state:!0,deviceId:this.deviceId,serviceId:this.serviceId,characteristicId:this.characteristicId,success:function(e){console.log("启用 notify 功能 success",e.errMsg)},fail:function(e){console.log("启用 notify 功能 success2",e.errMsg)}})},close:function(){var e=this;uni.closeBLEConnection({deviceId:this.connectDev.deviceId,success:function(t){e.connectDev=null,e.list={temp:"",humi:"",air:"",fan:""},console.log("断开蓝牙成功",t)},fail:function(e){console.log("断开蓝牙失败",e)}})}}};t.default=c},8626:function(e,t,n){"use strict";n.r(t);var i=n("771a"),a=n.n(i);for(var c in i)"default"!==c&&function(e){n.d(t,e,(function(){return i[e]}))}(c);t["default"]=a.a},a8b5:function(e,t,n){"use strict";n.r(t);var i=n("707e"),a=n.n(i);for(var c in i)"default"!==c&&function(e){n.d(t,e,(function(){return i[e]}))}(c);t["default"]=a.a},befa:function(e,t,n){"use strict";n.r(t);var i=n("d25b"),a=n("8626");for(var c in a)"default"!==c&&function(e){n.d(t,e,(function(){return a[e]}))}(c);n("2bc5");var r,o=n("f0c5"),s=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"6d4a4638",null,!1,i["a"],r);t["default"]=s.exports},c350:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"uni-card",class:{"uni-card--full":e.isFull,"uni-card--shadow":e.isShadow,"uni-card--border":e.border},style:{margin:e.isFull?0:e.margin,padding:e.spacing,"box-shadow":e.isShadow?e.shadow:""}},[e._t("cover",[e.cover?n("v-uni-view",{staticClass:"uni-card__cover"},[n("v-uni-image",{staticClass:"uni-card__cover-image",attrs:{mode:"widthFix",src:e.cover},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick("cover")}}})],1):e._e()]),e._t("title",[e.title||e.extra?n("v-uni-view",{staticClass:"uni-card__header"},[n("v-uni-view",{staticClass:"uni-card__header-box",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick("title")}}},[e.thumbnail?n("v-uni-view",{staticClass:"uni-card__header-avatar"},[n("v-uni-image",{staticClass:"uni-card__header-avatar-image",attrs:{src:e.thumbnail,mode:"aspectFit"}})],1):e._e(),n("v-uni-view",{staticClass:"uni-card__header-content"},[n("v-uni-text",{staticClass:"uni-card__header-content-title uni-ellipsis"},[e._v(e._s(e.title))]),e.title&&e.subTitle?n("v-uni-text",{staticClass:"uni-card__header-content-subtitle uni-ellipsis"},[e._v(e._s(e.subTitle))]):e._e()],1)],1),n("v-uni-view",{staticClass:"uni-card__header-extra",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick("extra")}}},[n("v-uni-text",{staticClass:"uni-card__header-extra-text"},[e._v(e._s(e.extra))])],1)],1):e._e()]),n("v-uni-view",{staticClass:"uni-card__content",style:{padding:e.padding},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick("content")}}},[e._t("default")],2),n("v-uni-view",{staticClass:"uni-card__actions",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick("actions")}}},[e._t("actions")],2)],2)},c=[]},d25b:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i}));var i={uniCard:n("66fa").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"content"},[n("v-uni-button",{attrs:{type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.initBle.apply(void 0,arguments)}}},[e._v("初始化蓝牙模块")]),null===e.connectDev?n("v-uni-scroll-view",{attrs:{"scroll-y":"true","show-scrollbar":"true"}},[n("v-uni-radio-group",e._l(e.bleDevs,(function(t,i){return t.name.length>0?n("v-uni-view",{key:i},[n("v-uni-view",{staticStyle:{"font-size":"32rpx",color:"#333"}},[n("v-uni-radio",{attrs:{value:t.deviceId}}),e._v(e._s(t.name))],1),n("v-uni-view",{staticStyle:{"font-size":"20rpx"}},[e._v("信号强度: "+e._s(t.RSSI)+"dBm ("+e._s(Math.max(100+t.RSSI,0))+"%)")]),n("v-uni-view",{staticStyle:{"font-size":"20rpx"}},[e._v("deviceId: "+e._s(t.deviceId)+" 设备名称: "+e._s(t.name))]),n("v-uni-button",{staticStyle:{margin:"20rpx","background-color":"#007AFF"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.createBLEConnection(t)}}},[e._v("连接")])],1):e._e()})),1)],1):e._e(),null!==e.connectDev?n("v-uni-view",{staticClass:"connectDev"},[n("v-uni-view",{staticStyle:{"font-size":"32rpx",color:"#333"}},[n("v-uni-radio",{attrs:{value:e.connectDev.deviceId}}),e._v(e._s(e.connectDev.name))],1),n("v-uni-view",{staticStyle:{"font-size":"20rpx"}},[e._v("信号强度: "+e._s(e.connectDev.RSSI)+"dBm ("+e._s(Math.max(100+e.connectDev.RSSI,0))+"%)")]),n("v-uni-view",{staticStyle:{"font-size":"20rpx"}},[e._v("deviceId: "+e._s(e.connectDev.deviceId)+" 设备名称: "+e._s(e.connectDev.name))]),n("v-uni-button",{staticStyle:{margin:"20rpx","background-color":"#007AFF",padding:"10rpx"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}},[e._v("断开")])],1):e._e(),n("uni-card",{directives:[{name:"show",rawName:"v-show",value:e.list.temp,expression:"list.temp"}],attrs:{title:"温度"}},[n("h1",[e._v(e._s(e.list.temp))])]),n("uni-card",{directives:[{name:"show",rawName:"v-show",value:e.list.humi,expression:"list.humi"}],attrs:{title:"湿度"}},[n("h1",[e._v(e._s(e.list.humi))])]),n("uni-card",{directives:[{name:"show",rawName:"v-show",value:e.list.air,expression:"list.air"}],attrs:{title:"空气"}},[n("h1",[e._v(e._s(e.list.air))])]),n("uni-card",{directives:[{name:"show",rawName:"v-show",value:e.list.fan,expression:"list.fan"}],attrs:{title:"风扇"}},[n("h1",[e._v(e._s(e.list.fan))])]),n("uni-card",{directives:[{name:"show",rawName:"v-show",value:e.list.eq,expression:"list.eq"}],attrs:{title:"电量"}},[n("h1",[e._v(e._s(parseInt(e.list.eq)))])]),n("uni-card",{directives:[{name:"show",rawName:"v-show",value:e.list.vlot1,expression:"list.vlot1"}],attrs:{title:"电压"}},[n("h1",[e._v(e._s(parseInt(e.list.vlot1)))])]),n("uni-card",{directives:[{name:"show",rawName:"v-show",value:e.list.ampere,expression:"list.ampere"}],attrs:{title:"电流"}},[n("h1",[e._v(e._s(parseInt(e.list.ampere)))])]),null!==e.connectDev?[n("uni-card",{attrs:{title:"开启"}},[n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendBlueMsg("0")}}},[e._v("开锁")]),n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendBlueMsg("1")}}},[e._v("上锁")]),n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendBlueMsg("2")}}},[e._v("鸣笛")]),n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendBlueMsg("3")}}},[e._v("左转开")]),n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendBlueMsg("4")}}},[e._v("右转开")]),n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendBlueMsg("5")}}},[e._v("最大速度")])],1),n("uni-card",{attrs:{title:"关闭"}},[n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendBlueMsg("6")}}},[e._v("左转关")]),n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendBlueMsg("7")}}},[e._v("右转关")]),n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendBlueMsg("8")}}},[e._v("停车")])],1)]:e._e()],2)},c=[]},f7f7:function(e,t,n){var i=n("5cf7");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("eb7056a0",i,!0,{sourceMap:!1,shadowMode:!1})},fdb8:function(e,t,n){var i=n("2dd4");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("4092f734",i,!0,{sourceMap:!1,shadowMode:!1})}}]);